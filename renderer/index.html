<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>quick-zo</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' blob: data:; style-src 'self' 'unsafe-inline'; script-src 'self'; img-src 'self' blob: data:;">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: transparent;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Inter', 'Segoe UI', sans-serif;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-8px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    @keyframes textShimmer {
      0% { background-position: 100% center; }
      100% { background-position: 0% center; }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes slideUp {
      from { opacity: 1; transform: translateY(0); }
      to { opacity: 0; transform: translateY(-20px); }
    }

    #wrap {
      backdrop-filter: blur(60px) saturate(180%);
      -webkit-backdrop-filter: blur(60px) saturate(180%);
      background: rgba(255, 255, 255, 0.92);
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 24px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08);
      padding: 14px;
      margin: 16px;
      color: var(--text-color-primary);
      position: relative;
      min-width: 620px;
      max-width: 1040px;
      width: auto;
      animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    html.dark #wrap {
      background: rgba(10, 10, 10, 0.92);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    #drag-handle {
      position: absolute;
      top: 0;
      left: 0;
      right: 48px;
      height: 32px;
      cursor: move;
      -webkit-app-region: drag;
      border-radius: 24px 24px 0 0;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.2s;
    }

    #drag-handle:hover {
      opacity: 1;
      background: rgba(0, 0, 0, 0.03);
    }

    #drag-handle::after {
      content: '⋮⋮';
      font-size: 16px;
      color: rgba(0, 0, 0, 0.3);
      letter-spacing: 2px;
    }

    #close-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 28px;
      height: 28px;
      border: none;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.05);
      color: #6b7280;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      line-height: 1;
      transition: all 0.2s;
      z-index: 1000;
      -webkit-app-region: no-drag;
    }

    html.dark #close-btn {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.7);
    }

    #close-btn:hover {
      background: rgba(239, 68, 68, 0.1);
      color: #ef4444;
      transform: scale(1.1);
    }

    #theme-toggle {
      position: absolute;
      top: 8px;
      right: 44px;
      width: 28px;
      height: 28px;
      border: none;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.05);
      color: #6b7280;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      line-height: 1;
      transition: all 0.2s;
      z-index: 1000;
      -webkit-app-region: no-drag;
    }

    html.dark #theme-toggle {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.7);
    }

    #theme-toggle:hover {
      background: rgba(0, 0, 0, 0.1);
      color: #374151;
      transform: scale(1.1);
    }

    html.dark #theme-toggle:hover {
      background: rgba(255, 255, 255, 0.15);
      color: rgba(255, 255, 255, 0.9);
    }

    #theme-toggle svg {
      width: 16px;
      height: 16px;
      position: absolute;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    #theme-toggle .sun-icon { transform: scale(1) translateY(0); opacity: 1; }
    html.dark #theme-toggle .sun-icon { transform: scale(0.5) translateY(20px); opacity: 0; }
    #theme-toggle .moon-icon { transform: scale(0.5) translateY(20px); opacity: 0; }
    html.dark #theme-toggle .moon-icon { transform: scale(1) translateY(0); opacity: 1; }

    #prompt {
      width: 100%;
      min-height: 54px;
      max-height: 180px;
      resize: none;
      border: none;
      border-radius: 14px;
      padding: 16px 16px;
      background: transparent;
      color: #1f2937;
      outline: none;
      font-size: 15px;
      line-height: 1.5;
      font-family: inherit;
    }

    html.dark #prompt { color: #ffffff; }
    #prompt::placeholder { color: #6b7280; }
    html.dark #prompt::placeholder { color: rgba(255, 255, 255, 0.5); }

    #actions {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-top: 10px;
      gap: 8px;
    }

    .action-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border: none;
      border-radius: 50%;
      background: transparent;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.2s;
    }

    html.dark .action-btn { color: rgba(255, 255, 255, 0.6); }

    .action-btn:hover {
      background: rgba(0, 0, 0, 0.05);
      color: #374151;
    }

    html.dark .action-btn:hover {
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255, 255, 255, 0.9);
    }

    .action-btn svg { width: 20px; height: 20px; }

    .send-btn {
      width: 32px;
      height: 32px;
      border: none;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      background: transparent;
      color: #6b7280;
    }

    html.dark .send-btn { color: rgba(255, 255, 255, 0.6); }

    .send-btn.has-content {
      background: #1a1a1a;
      color: white;
    }

    html.dark .send-btn.has-content {
      background: rgba(255, 255, 255, 0.9);
      color: #1a1a1a;
    }

    .send-btn.has-content:hover {
      background: #000;
      transform: scale(1.05);
    }

    html.dark .send-btn.has-content:hover { background: #fff; }

    .send-btn:hover { transform: scale(1.05); }
    .send-btn:active { transform: scale(0.95); }
    .send-btn.loading svg { animation: spin 1s linear infinite; }
    .send-btn svg { width: 18px; height: 18px; }

    #status {
      margin-top: 14px;
      font-size: 14px;
      white-space: normal;
      padding: 16px 18px;
      background: rgba(0, 0, 0, 0.04);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      border-left: 3px solid rgba(0, 0, 0, 0.1);
      line-height: 1.65;
      max-height: 520px;
      overflow-y: auto;
      overflow-x: hidden;
      transition: all 0.3s;
      color: #1f2937;
      font-family: inherit;
    }

    html.dark #status {
      background: rgba(255, 255, 255, 0.04);
      border-left-color: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.9);
    }

    html.dark #status * { color: rgba(255, 255, 255, 0.9); }
    #status:empty { display: none; }

    #status.error {
      border-left-color: #ef4444;
      background: rgba(239, 68, 68, 0.1);
      color: #7f1d1d;
    }

    #status.processing {
      border-left-color: #f59e0b;
      background: rgba(245, 158, 11, 0.08);
    }

    #status.processing p,
    #status.processing {
      background: linear-gradient(
        90deg,
        transparent 0%, transparent calc(50% - 40px),
        #f59e0b calc(50% - 20px), #fbbf24 50%,
        #f59e0b calc(50% + 20px), transparent calc(50% + 40px),
        transparent 100%
      ),
      linear-gradient(90deg, #92400e, #92400e);
      background-size: 250% 100%, auto;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-position: 100% center;
      animation: textShimmer 2s linear infinite;
    }

    #status::-webkit-scrollbar { width: 6px; }
    #status::-webkit-scrollbar-thumb { background: rgba(55, 65, 81, 0.16); border-radius: 4px; }

    #status h1, #status h2, #status h3,
    #status h4, #status h5, #status h6 {
      margin: 12px 0 6px;
      font-weight: 600;
    }

    #status h1 { font-size: 20px; }
    #status h2 { font-size: 18px; }
    #status h3 { font-size: 17px; }
    #status h4, #status h5, #status h6 { font-size: 15px; }

    #status p { margin: 8px 0; color: inherit; }
    html.dark #status p { color: rgba(255, 255, 255, 0.9); }

    #status ul { margin: 10px 0 10px 20px; padding-left: 18px; }
    #status li { margin: 4px 0; }
    #status ol { margin: 10px 0 10px 22px; padding-left: 18px; }

    #status a {
      color: #1d4ed8;
      text-decoration: none;
      border-bottom: 1px solid rgba(29, 78, 216, 0.35);
    }

    #status code {
      background: rgba(17, 24, 39, 0.07);
      color: #111827;
      border-radius: 6px;
      padding: 2px 6px;
      font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
      font-size: 12px;
    }

    html.dark #status code {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.95);
    }

    #status pre {
      background: rgba(17, 24, 39, 0.08);
      border: 1px solid rgba(17, 24, 39, 0.12);
      border-radius: 12px;
      padding: 14px 16px;
      margin: 12px 0;
      overflow-x: auto;
      font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
      font-size: 12px;
      line-height: 1.6;
      color: #1f2937;
    }

    html.dark #status pre {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.12);
      color: rgba(255, 255, 255, 0.95);
    }

    #status pre code { background: transparent; padding: 0; border-radius: 0; color: inherit; }

    #status blockquote {
      border-left: 3px solid rgba(15, 23, 42, 0.18);
      padding-left: 12px;
      margin: 10px 0;
      color: rgba(55, 65, 81, 0.78);
    }

    #status hr {
      border: none;
      border-top: 1px solid rgba(148, 163, 184, 0.45);
      margin: 16px 0;
    }

    #status table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      font-size: 13px;
      border-radius: 8px;
      overflow: hidden;
    }

    #status table th, #status table td {
      padding: 10px 14px;
      text-align: left;
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }

    #status table th {
      background: rgba(0, 0, 0, 0.04);
      font-weight: 600;
      color: #374151;
    }

    html.dark #status table th {
      background: rgba(255, 255, 255, 0.05);
      color: rgba(255, 255, 255, 0.9);
    }

    .loading-text {
      background: linear-gradient(
        90deg,
        transparent 0%, transparent calc(50% - 40px),
        #1a1a1a calc(50% - 20px), #374151 50%,
        #1a1a1a calc(50% + 20px), transparent calc(50% + 40px),
        transparent 100%
      ),
      linear-gradient(90deg, #6b7280, #6b7280);
      background-size: 250% 100%, auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      background-position: 100% center;
      animation: textShimmer 2s linear infinite;
      font-weight: 500;
    }

    /* Settings panel */
    #settings-panel {
      display: none;
      padding: 12px 0 4px 0;
    }

    #settings-panel.open { display: block; }

    #settings-panel label {
      font-size: 12px;
      color: #6b7280;
      display: block;
      margin-bottom: 4px;
    }

    html.dark #settings-panel label { color: rgba(255, 255, 255, 0.5); }

    #settings-panel input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid rgba(0, 0, 0, 0.12);
      border-radius: 10px;
      font-size: 13px;
      background: rgba(0, 0, 0, 0.03);
      color: #1f2937;
      outline: none;
      font-family: 'SF Mono', 'Monaco', monospace;
    }

    html.dark #settings-panel input {
      border-color: rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.05);
      color: rgba(255, 255, 255, 0.9);
    }

    #settings-panel input:focus {
      border-color: rgba(59, 130, 246, 0.5);
    }

    #save-token-btn {
      margin-top: 8px;
      padding: 6px 14px;
      border: none;
      border-radius: 8px;
      background: #1a1a1a;
      color: white;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    html.dark #save-token-btn {
      background: rgba(255, 255, 255, 0.9);
      color: #1a1a1a;
    }

    #save-token-btn:hover { opacity: 0.85; }
  </style>
</head>
<body>
  <div id="wrap">
    <div id="drag-handle"></div>

    <button id="theme-toggle" title="Toggle theme">
      <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="5"/>
        <line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
        <line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
      </svg>
      <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
      </svg>
    </button>

    <button id="close-btn" title="Close (Esc)">×</button>

    <!-- Settings panel (token input) -->
    <div id="settings-panel">
      <label>Zo Access Token</label>
      <input type="password" id="token-input" placeholder="paste your Zo access token..." autocomplete="off" spellcheck="false">
      <button id="save-token-btn">Save</button>
    </div>

    <textarea
      id="prompt"
      spellcheck="false"
      placeholder="Ask Zo anything…"
      autofocus
    ></textarea>

    <div id="actions">
      <!-- Settings toggle -->
      <button class="action-btn" id="settings-btn" title="Settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
      </button>

      <!-- Clear chat -->
      <button class="action-btn" id="clear-btn" title="Clear chat">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="3 6 5 6 21 6"/>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
        </svg>
      </button>

      <!-- Send -->
      <button class="send-btn" id="send-btn" title="Send (Cmd+Enter)">
        <svg id="send-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"/>
        </svg>
        <svg id="loading-icon" style="display:none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
        </svg>
      </button>
    </div>

    <div id="status"></div>
  </div>

  <script type="module" src="./renderer.js"></script>
</body>
</html>
