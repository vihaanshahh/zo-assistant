<!doctype html>
<html class="dark">
<head>
  <meta charset="utf-8" />
  <title>Zo</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' blob: data:; style-src 'self' 'unsafe-inline'; script-src 'self'; img-src 'self' blob: data:;">
  <style>
    /* ── Zo Design System ──────────────────────────────────────────────────── */
    :root {
      --bg:        #ffffff;
      --surface:   #f9fafb;
      --surface2:  #f3f4f6;
      --border:    #e5e5e5;
      --border2:   #d4d4d4;
      --text:      #171717;
      --text-muted:#737373;
      --accent:    #171717;
      --accent-fg: #ffffff;
      --error:     #dc2626;
      --error-bg:  #fef2f2;
      --radius:    6px;
      --radius-lg: 8px;
    }

    html.dark {
      --bg:        #0a0a0a;
      --surface:   #111111;
      --surface2:  #171717;
      --border:    #262626;
      --border2:   #333333;
      --text:      #ededed;
      --text-muted:#a3a3a3;
      --accent:    #ededed;
      --accent-fg: #0a0a0a;
      --error:     #f87171;
      --error-bg:  #1c0a0a;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      background: transparent;
      font-family: 'Geist', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 13px;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-6px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    @keyframes shimmer {
      0%   { opacity: 0.4; }
      50%  { opacity: 1; }
      100% { opacity: 0.4; }
    }

    /* ── Wrap ──────────────────────────────────────────────────────────────── */
    #wrap {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      margin: 12px;
      color: var(--text);
      position: relative;
      animation: fadeIn 0.15s ease-out;
    }

    /* ── Drag handle ───────────────────────────────────────────────────────── */
    #drag-handle {
      position: absolute;
      top: 0; left: 0; right: 120px;
      height: 28px;
      cursor: move;
      -webkit-app-region: drag;
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }

    /* ── Top bar ───────────────────────────────────────────────────────────── */
    #top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 10px 8px 14px;
      border-bottom: 1px solid var(--border);
    }

    #top-bar-label {
      font-size: 11px;
      font-weight: 500;
      color: var(--text-muted);
      letter-spacing: 0.04em;
      text-transform: uppercase;
      -webkit-app-region: drag;
      flex: 1;
    }

    #top-bar-actions {
      display: flex;
      align-items: center;
      gap: 2px;
      -webkit-app-region: no-drag;
    }

    .icon-btn {
      width: 26px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: transparent;
      color: var(--text-muted);
      border-radius: var(--radius);
      cursor: pointer;
      transition: background 0.1s, color 0.1s;
    }

    .icon-btn:hover {
      background: var(--surface2);
      color: var(--text);
    }

    .icon-btn svg { width: 14px; height: 14px; }

    /* ── Settings panel ────────────────────────────────────────────────────── */
    #settings-panel {
      display: none;
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
      background: var(--surface);
      overflow: visible;
    }

    #settings-panel.open { display: block; }

    
    #settings-panel label {
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 500;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      display: block;
      margin-bottom: 6px;
    }

    #settings-panel input {
      width: 100%;
      padding: 6px 10px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 12px;
      font-family: 'Geist Mono', 'JetBrains Mono', 'SFMono-Regular', Consolas, monospace;
      background: var(--bg);
      color: var(--text);
      outline: none;
    }

    #settings-panel input:focus { border-color: var(--border2); }

    /* Custom dropdown */
    .dropdown {
      position: relative;
      width: 100%;
    }

    .dropdown-selected {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 10px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 12px;
      background: var(--bg);
      color: var(--text);
      cursor: pointer;
      outline: none;
    }

    .dropdown-selected:hover,
    .dropdown-selected:focus { border-color: var(--border2); }

    .dropdown-selected svg {
      color: var(--text-muted);
      transition: transform 0.15s;
    }

    .dropdown.open .dropdown-selected svg {
      transform: rotate(180deg);
    }

    .dropdown-menu-fixed {
      position: fixed;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      max-height: 240px;
      overflow-y: auto;
      z-index: 9999;
      box-shadow: 0 -4px 16px rgba(0,0,0,0.25);
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px 10px;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.1s;
    }

    .dropdown-item:hover { background: var(--surface2); }
    .dropdown-item.active { background: var(--surface2); }

    .dropdown-item .model-label { color: var(--text); }
    .dropdown-item .model-vendor {
      font-size: 10px;
      color: var(--text-muted);
    }

    .dropdown-menu::-webkit-scrollbar { width: 4px; }
    .dropdown-menu::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

    #save-token-btn {
      margin-top: 8px;
      padding: 5px 12px;
      border: 1px solid var(--border2);
      border-radius: var(--radius);
      background: var(--accent);
      color: var(--accent-fg);
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: opacity 0.1s;
    }

    #save-token-btn:hover { opacity: 0.85; }

    /* Toggle switch */
    .setting-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .setting-row label {
      margin-bottom: 0;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .setting-row .setting-desc {
      font-size: 10px;
      color: var(--text-muted);
      font-weight: 400;
      text-transform: none;
      letter-spacing: 0;
    }

    .toggle {
      position: relative;
      width: 36px;
      height: 20px;
      flex-shrink: 0;
    }

    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--surface2);
      border: 1px solid var(--border2);
      border-radius: 10px;
      transition: background 0.2s, border-color 0.2s;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 14px;
      width: 14px;
      left: 2px;
      bottom: 2px;
      background: var(--text-muted);
      border-radius: 50%;
      transition: transform 0.2s, background 0.2s;
    }

    .toggle input:checked + .toggle-slider {
      background: var(--accent);
      border-color: var(--accent);
    }

    .toggle input:checked + .toggle-slider:before {
      transform: translateX(16px);
      background: var(--accent-fg);
    }

    /* ── Prompt area ───────────────────────────────────────────────────────── */
    #prompt {
      width: 100%;
      min-height: 52px;
      max-height: 160px;
      resize: none;
      border: none;
      outline: none;
      padding: 12px 14px;
      background: transparent;
      color: var(--text);
      font-size: 14px;
      font-family: inherit;
      line-height: 1.5;
    }

    #prompt::placeholder { color: var(--text-muted); }

    #prompt::-webkit-scrollbar { width: 4px; }
    #prompt::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

    /* ── Bottom bar ────────────────────────────────────────────────────────── */
    #bottom-bar {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 4px;
      padding: 6px 10px;
      border-top: 1px solid var(--border);
    }

    #hint {
      flex: 1;
      font-size: 11px;
      color: var(--text-muted);
      padding-left: 4px;
    }

    .send-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 5px 12px;
      border: 1px solid var(--border2);
      border-radius: var(--radius);
      background: var(--surface2);
      color: var(--text-muted);
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.1s;
    }

    .send-btn.has-content {
      background: var(--accent);
      color: var(--accent-fg);
      border-color: var(--accent);
    }

    .send-btn:hover:not(.has-content) {
      background: var(--surface2);
      color: var(--text);
      border-color: var(--border2);
    }

    .send-btn.has-content:hover { opacity: 0.85; }
    .send-btn svg { width: 13px; height: 13px; }
    .send-btn.loading svg { animation: spin 1s linear infinite; }

    /* ── Response area ─────────────────────────────────────────────────────── */
    #status {
      padding: 10px 14px 12px;
      font-size: 13px;
      line-height: 1.45;
      color: var(--text);
      max-height: 480px;
      overflow-y: auto;
      overflow-x: hidden;
      border-top: 1px solid var(--border);
    }

    #status:empty { display: none; }

    #status::-webkit-scrollbar { width: 4px; }
    #status::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

    #status.error { color: var(--error); }

    #status.processing {
      color: var(--text-muted);
      animation: shimmer 1.5s ease-in-out infinite;
    }

    /* Markdown styles */
    #status h1, #status h2, #status h3,
    #status h4, #status h5, #status h6 {
      font-weight: 600;
      margin: 12px 0 4px;
      color: var(--text);
    }

    #status h1 { font-size: 16px; }
    #status h2 { font-size: 15px; }
    #status h3, #status h4, #status h5, #status h6 { font-size: 13px; }

    #status p { margin: 4px 0; }
    #status p:first-child { margin-top: 0; }
    #status p:last-child { margin-bottom: 0; }
    #status p:empty { display: none; }

    #status ul, #status ol { margin: 4px 0 4px 16px; padding: 0; }
    #status li { margin: 2px 0; line-height: 1.5; }

    #status a {
      color: var(--text);
      text-decoration: underline;
      text-decoration-color: var(--text-muted);
      text-underline-offset: 2px;
      cursor: pointer;
      transition: text-decoration-color 0.15s, opacity 0.15s;
    }

    #status a:hover {
      text-decoration-color: var(--text);
    }

    #status a.footnote-link {
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      vertical-align: baseline;
      margin-left: 1px;
      opacity: 0.5;
    }

    #status a.footnote-link::after {
      content: '↗';
      font-size: 10px;
    }

    #status a.footnote-link:hover {
      opacity: 1;
    }

    #status code {
      font-family: 'Geist Mono', 'JetBrains Mono', 'SFMono-Regular', Consolas, monospace;
      font-size: 11px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 1px 5px;
      color: var(--text);
    }

    #status pre {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 10px 12px;
      margin: 8px 0;
      overflow-x: auto;
      font-family: 'Geist Mono', 'JetBrains Mono', 'SFMono-Regular', Consolas, monospace;
      font-size: 11px;
      line-height: 1.6;
    }

    #status pre code { background: none; border: none; padding: 0; font-size: 11px; }
    #status pre::-webkit-scrollbar { height: 4px; }
    #status pre::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

    #status blockquote {
      border-left: 2px solid var(--border2);
      padding-left: 10px;
      margin: 8px 0;
      color: var(--text-muted);
    }

    #status hr {
      border: none;
      border-top: 1px solid var(--border);
      margin: 12px 0;
    }

    #status table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
      margin: 8px 0;
    }

    #status table th, #status table td {
      padding: 6px 10px;
      text-align: left;
      border: 1px solid var(--border);
    }

    #status table th {
      background: var(--surface);
      font-weight: 600;
    }

    #status strong { font-weight: 600; }
    #status em { font-style: italic; }

    /* ── Mini mode ─────────────────────────────────────────────────────────── */
    .mini-mode #wrap {
      border-radius: var(--radius);
    }

    .mini-mode #top-bar,
    .mini-mode #settings-panel,
    .mini-mode #prompt,
    .mini-mode #bottom-bar,
    .mini-mode #drag-handle {
      display: none;
    }

    .mini-mode #status {
      display: block !important;
      border-top: none;
      max-height: 160px;
      min-height: 36px;
      padding: 8px 12px;
      font-size: 12px;
      line-height: 1.4;
      overflow-y: auto;
      cursor: pointer;
      color: var(--text);
    }

    .mini-mode #status:empty::before {
      content: 'Zo';
      color: var(--text-muted);
    }

    .mini-mode #status.processing {
      color: var(--text-muted);
      animation: shimmer 1.5s ease-in-out infinite;
    }
  </style>
</head>
<body>
  <div id="wrap">
    <div id="drag-handle"></div>

    <!-- Top bar -->
    <div id="top-bar">
      <span id="top-bar-label">Zo</span>
      <div id="top-bar-actions">
        <button class="icon-btn" id="settings-btn" title="Settings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
        </button>
        <button class="icon-btn" id="theme-btn" title="Toggle theme">
          <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
          </svg>
          <svg class="moon-icon" style="display:none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <button class="icon-btn" id="clear-btn" title="Clear">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3 6 5 6 21 6"/>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
          </svg>
        </button>
        <button class="icon-btn" id="close-btn" title="Close (Esc)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Settings panel -->
    <div id="settings-panel">
      <label>Zo Access Token</label>
      <input type="password" id="token-input" placeholder="zo_sk_..." autocomplete="off" spellcheck="false">
      <button id="save-token-btn">Save token</button>

      <div class="setting-row" style="flex-direction: column; align-items: stretch;">
        <label style="margin-bottom: 6px;">Model</label>
        <div id="model-dropdown" class="dropdown"></div>
      </div>

      <div class="setting-row">
        <label>
          Stealth Mode
          <span class="setting-desc">Hide from screen recording</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="stealth-toggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <!-- Response -->
    <div id="status"></div>

    <!-- Prompt -->
    <textarea id="prompt" spellcheck="false" placeholder="Ask Zo anything… " autofocus></textarea>

    <!-- Bottom bar -->
    <div id="bottom-bar">
      <span id="hint">Enter to send · Shift+Enter for new line</span>
      <button class="send-btn" id="send-btn">
        <svg id="send-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
        </svg>
        <svg id="loading-icon" style="display:none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
        </svg>
        Send
      </button>
    </div>
  </div>

  <script type="module" src="./renderer.js"></script>
</body>
</html>
